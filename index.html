<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday Sheela Michi!</title>
    <!-- Load Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <!-- Load Tone.js for sound generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>

    <style>
      /* Define a festive, dark, and vibrant theme */
      :root {
        --primary-color: #ff69b4; /* Hot Pink */
        --secondary-color: #8a2be2; /* Blue Violet */
        --text-color: #f0f9ff; /* Light Blue/White */
        --card-bg: rgba(255, 255, 255, 0.1);
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          #1f1133,
          #331e50
        ); /* Dark purple gradient */
        color: var(--text-color);
        /* IMPORTANT FOR MOBILE: Allows content to stretch beyond viewport height */
        min-height: 100vh;
        display: flex;
        flex-direction: column; /* Ensure main container stacks */
        justify-content: flex-start; /* Start content from the top */
        align-items: center; /* Still center horizontally */
        /* Add padding for scrollable mobile spacing, REMOVED overflow: hidden */
        padding: 2rem 1rem;
      }

      .card {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        background-color: var(--card-bg);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        /* Added transition for interactive movement */
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      }

      /* Subtle hover effect for the card */
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px 0 rgba(255, 105, 180, 0.2);
      }

      /* --- GLOW EFFECT --- */
      @keyframes glow {
        0%,
        100% {
          text-shadow: 0 0 5px var(--primary-color),
            0 0 10px var(--primary-color), 0 0 15px var(--secondary-color);
          transform: scale(1);
        }
        50% {
          text-shadow: 0 0 10px var(--primary-color),
            0 0 20px var(--primary-color), 0 0 30px var(--secondary-color),
            0 0 40px var(--secondary-color);
          transform: scale(1.05);
        }
      }

      #name-glow {
        animation: glow 3s infinite ease-in-out;
        background-image: linear-gradient(
          45deg,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        display: inline-block;
      }

      /* --- CONFETTI ANIMATION --- */
      @keyframes fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0.5;
        }
      }

      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
        animation: fall 10s linear infinite;
      }

      /* --- BALLOON DECORATION --- */
      /* Keyframes for gentle float/sway */
      @keyframes float {
        0% {
          transform: translateY(0) rotate(2deg);
        }
        50% {
          transform: translateY(-20px) rotate(-2deg);
        }
        100% {
          transform: translateY(0) rotate(2deg);
        }
      }

      .balloon {
        position: absolute;
        width: 60px;
        height: 80px;
        /* Creates the balloon shape */
        border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        /* Combine fall (to move up from bottom) and float (for the sway) */
        animation: float 4s ease-in-out infinite, fall 15s linear infinite;
        opacity: 0.85;
        box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.4);
        z-index: 5; /* Below the main card (z-index 10) */
        filter: saturate(1.5);
      }

      /* Balloon string */
      .balloon::after {
        content: "";
        position: absolute;
        bottom: -30px;
        left: 50%;
        transform: translateX(-50%);
        width: 1px;
        height: 60px;
        background: white;
        opacity: 0.6;
        z-index: 0;
      }

      /* --- MESSAGE REVEAL --- */
      .revealed {
        opacity: 1;
        transform: scale(1);
      }

      #initial-message {
        transition: opacity 1s ease-in-out;
      }

      #birthday-message {
        opacity: 0;
        transform: scale(0.9);
        transition: all 1s ease-in-out 1s; /* Delay the reveal */
      }
    </style>
  </head>
  <body>
    <!-- Confetti Background Elements -->
    <script>
      // JavaScript to dynamically create confetti elements
      const body = document.body;
      const confettiCount = 50;
      const colors = ["#ff69b4", "#ffd700", "#8a2be2", "#00ffff"];

      for (let i = 0; i < confettiCount; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.animationDelay = `${Math.random() * -10}s`;
        confetti.style.animationDuration = `${Math.random() * 5 + 8}s`;
        confetti.style.backgroundColor =
          colors[Math.floor(Math.random() * colors.length)];

        if (i % 3 === 0) {
          confetti.style.borderRadius = "50%";
        } else if (i % 5 === 0) {
          confetti.style.transform = "rotate(45deg)";
        }

        body.appendChild(confetti);
      }

      // --- BALLOON PLACEMENT SCRIPT ---
      const balloonColors = ["#ff4d4d", "#ffbf00", "#4dd2ff", "#b366ff"];

      function createBalloon(color, left, top, delay, size) {
        const balloon = document.createElement("div");
        balloon.classList.add("balloon");
        balloon.style.backgroundColor = color;
        balloon.style.left = left;
        // The top position is where it starts to "fall" from
        balloon.style.top = `${80 + parseFloat(top) * 0.2}vh`;
        balloon.style.animationDelay = delay;
        balloon.style.animationDuration = `${12 + Math.random() * 6}s`;
        balloon.style.width = `${size}px`;
        balloon.style.height = `${size * 1.3}px`;

        // Recreating the string using a simple div for simplicity
        const string = document.createElement("div");
        string.style.cssText = `
                position: absolute;
                bottom: -${size * 0.4}px;
                left: 50%;
                transform: translateX(-50%);
                width: 1px;
                height: ${size * 1.1}px;
                background: rgba(255, 255, 255, 0.7);
                opacity: 0.6;
            `;
        balloon.appendChild(string);
        body.appendChild(balloon);
      }

      // Fixed placement for a few large, colorful balloons
      createBalloon(balloonColors[0], "10%", "0", "0s", 75);
      createBalloon(balloonColors[1], "85%", "0", "-2s", 60);
      createBalloon(balloonColors[2], "5%", "0", "-4s", 80);
      createBalloon(balloonColors[3], "70%", "0", "-6s", 65);
      createBalloon(balloonColors[0], "25%", "0", "-1s", 70);
      createBalloon(balloonColors[2], "50%", "0", "-3s", 78);
    </script>
    <!-- End Decoration Setup -->

    <main
      class="w-11/12 max-w-lg p-8 md:p-12 rounded-3xl card text-center space-y-8 z-10"
    >
      <!-- Initial Message -->
      <div id="initial-message">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-4 leading-tight">
          Hey, Sheela Michi!
        </h1>
        <p class="text-xl text-gray-300">
          Click the button below to open your special birthday message!
        </p>
        <button
          id="reveal-button"
          class="mt-6 px-8 py-3 bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold rounded-full shadow-lg transform transition duration-300 ease-in-out hover:scale-105 active:scale-95"
        >
          Reveal Magic Moment ‚ú®
        </button>
      </div>

      <!-- Hidden Birthday Message Section -->
      <div id="birthday-message" class="space-y-6">
        <!-- NEW: Image Placeholder for Sheela's Photo -->
        <div class="flex justify-center mb-6">
          <!-- IMPORTANT: Replace the placeholder URL below with the actual photo URL of Sheela Michi! -->
          <!-- Use a URL like: https://example.com/sheela.jpg or a hosting service link -->
          <img
            id="sheela-photo"
            src="https://res.cloudinary.com/dgmftp80m/image/upload/v1759774699/sheela_quhthe.jpg"
            alt="Photo of Sheela Michi"
            class="w-32 h-32 md:w-40 md:h-40 rounded-full border-4 border-white shadow-xl object-cover transform scale-90 transition duration-500 ease-in-out"
          />
        </div>

        <!-- NEW: Cake and Decoration Emojis -->
        <div class="flex justify-center items-center space-x-6 mb-4">
          <span class="text-4xl transform rotate-12">üéÅ</span>
          <span class="text-6xl transform scale-110">üéÇ</span>
          <span class="text-4xl transform -rotate-12">üïØÔ∏è</span>
        </div>

        <h2
          class="text-6xl md:text-7xl font-black uppercase tracking-wider"
          id="name-glow"
        >
          Happy Birthday!
        </h2>

        <h3 class="text-3xl font-semibold text-white/90">Sheela Michi</h3>

        <p class="text-lg md:text-xl leading-relaxed text-gray-200 pt-4">
          Wishing you a day filled with joy, laughter, and everything that makes
          you sparkle! May the year ahead bring you incredible adventures and
          wonderful new memories. You deserve all the happiness in the world.
        </p>

        <div class="pt-4">
          <p class="text-2xl font-bold italic text-yellow-300/90">
            Have an amazing celebration! üéâ
          </p>
          <!-- START: Updated Signature for Lungsom -->
          <p class="text-sm italic text-gray-400 mt-2">
            ‚Äî From your most handsome friend, Lungsom
          </p>
          <!-- END: Updated Signature for Lungsom -->
        </div>
      </div>
    </main>

    <script>
      /**
       * Birthday App Logic
       */

      let synth = null;
      let songPart = null;
      let isAudioContextStarted = false;

      /**
       * Initializes and plays the "Happy Birthday" melody using Tone.js.
       */
      async function playHappyBirthdaySong() {
        // Start the audio context if it hasn't been started (required by browsers on user gesture)
        if (!isAudioContextStarted) {
          try {
            await Tone.start();
            // Use a FMSynth for a brighter, bell-like sound
            synth = new Tone.FMSynth({
              harmonicity: 3.01,
              modulationIndex: 14,
              envelope: {
                attack: 0.01,
                decay: 0.2,
                sustain: 0.1,
                release: 0.5,
              },
              modulation: {
                type: "square",
              },
              modulationEnvelope: {
                attack: 0.05,
                decay: 0.3,
                sustain: 0,
                release: 0.5,
              },
            }).toDestination();
            isAudioContextStarted = true;
          } catch (error) {
            console.error("Could not start audio context:", error);
            return;
          }
        }

        // Define the "Happy Birthday" melody (Notes and durations)
        const melody = [
          // Happy birthday to you (Sheela Michi!)
          { time: "0:0:0", note: "C4", duration: "4n" },
          { time: "0:1:0", note: "C4", duration: "4n" },
          { time: "0:2:0", note: "D4", duration: "2n" },
          { time: "1:0:0", note: "C4", duration: "2n" },
          { time: "1:2:0", note: "F4", duration: "2n" },
          { time: "2:0:0", note: "E4", duration: "2n" },

          // Happy birthday to you
          { time: "2:2:0", note: "C4", duration: "4n" },
          { time: "2:3:0", note: "C4", duration: "4n" },
          { time: "3:0:0", note: "D4", duration: "2n" },
          { time: "3:2:0", note: "C4", duration: "2n" },
          { time: "4:0:0", note: "G4", duration: "2n" },
          { time: "4:2:0", note: "F4", duration: "2n" },

          // Happy birthday dear Sheela Michi
          { time: "5:0:0", note: "C4", duration: "4n" },
          { time: "5:1:0", note: "C4", duration: "4n" },
          { time: "5:2:0", note: "C5", duration: "2n" },
          { time: "6:0:0", note: "A4", duration: "4n" },
          { time: "6:1:0", note: "F4", duration: "4n" },
          { time: "6:2:0", note: "E4", duration: "4n" },
          { time: "6:3:0", note: "D4", duration: "4n" },

          // Happy birthday to you!
          { time: "7:0:0", note: "Bb4", duration: "4n" },
          { time: "7:1:0", note: "A4", duration: "4n" },
          { time: "7:2:0", note: "G4", duration: "2n" },
          { time: "8:0:0", note: "F4", duration: "2n" },
          { time: "8:2:0", note: "C4", duration: "1n" }, // The final, sustained C4
        ];

        // Create a Tone.Part to sequence the notes
        if (synth) {
          songPart = new Tone.Part((time, value) => {
            synth.triggerAttackRelease(value.note, value.duration, time);
          }, melody).start(0);

          Tone.Transport.bpm.value = 120; // Set a moderate tempo
          Tone.Transport.start();
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const revealButton = document.getElementById("reveal-button");
        const initialMessage = document.getElementById("initial-message");
        const birthdayMessage = document.getElementById("birthday-message");

        /**
         * Handles the birthday message reveal when the button is clicked.
         */
        async function revealBirthdayWish() {
          // Play the full birthday song
          await playHappyBirthdaySong();

          // 1. Hide the initial prompt and button smoothly
          initialMessage.style.opacity = "0";

          // Use a timeout to ensure the fade-out starts before hiding the element
          setTimeout(() => {
            initialMessage.style.height = "0";
            initialMessage.style.overflow = "hidden";
            initialMessage.style.display = "none";

            // 2. Animate the birthday message to be visible
            birthdayMessage.classList.add("revealed");
            birthdayMessage.style.opacity = "1";
            birthdayMessage.style.transform = "scale(1)";

            // Optional: Animate the photo specifically
            const sheelaPhoto = document.getElementById("sheela-photo");
            if (sheelaPhoto) {
              sheelaPhoto.style.transform = "scale(1)";
            }
          }, 500); // Start hiding after 0.5s

          // Remove the event listener after the first click
          revealButton.removeEventListener("click", revealBirthdayWish);
        }

        // Set up the event listener for the button
        revealButton.addEventListener("click", revealBirthdayWish);
      });
    </script>
  </body>
</html>
